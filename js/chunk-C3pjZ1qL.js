import{u as a,g as e}from"./chunk-B5qR3bqg.js";import{a as s}from"./chunk-Dv7RK_ed.js";import{l as t}from"./chunk-BcwQrg-K.js";import{s as n}from"./chunk-CsYshFua.js";import{u as r}from"./chunk-B6HHG8fs.js";import{a6 as l,r as o,a as i,w as c,W as u,X as m,U as p,bg as h,u as d,F as k,b0 as v,a3 as g,aS as f}from"./chunk-DItFX9tw.js";import"./chunk-ClxWGSjw.js";import"./chunk-DsPhSQSX.js";import"./chunk-COJDRNUs.js";import"./chunk-DUzMzk5W.js";import"./chunk-T1cRhSFL.js";import"./chunk-CjQQEEno.js";import"./chunk-q-ZagYLw.js";import"./chunk-B-qLbzZm.js";import"./chunk-VPk9p_S4.js";import"./chunk-DezxjiP8.js";import"./chunk-DNiUIIzL.js";import"./chunk-BvWJbea5.js";import"./chunk-DbPkkXUs.js";import"./chunk-DHt_odDz.js";import"./chunk-CktjyfsX.js";const j={class:"toast toast-top toast-end"},b={key:0,class:"alert alert-error"},y={key:1,class:"alert alert-success"},w={key:2,class:"alert alert-error"},I={class:""},x={for:"explore"},S=["accept"],C={class:"btn btn-primary btn-sm"},q={class:"p-0"},F={class:"flex items-center gap-8"},N={class:"avatar h-14"},T={class:"w-12 h-12 mask mask-squircle hover:w-14 hover:h-14"},U={class:"w-64"},_={class:"overflow-hidden font-bold whitespace-nowrap text-ellipsis"},D=["onClick"],L=l({__name:"ImageConfig",setup(l){const{t:L}=r(),W=a().globalConfig,{getImageList:X}=n(W),z=o("image/*"),A=o(0),B=t.createInstance({name:"imgStore"});async function E(a){if(!/image*/.test(a.target.files[0].type))return void(A.value=3);const{dataUrl:e,fileName:t}=await s(a.target.files[0]);B.setItem("".concat((new Date).getTime().toString(),"+").concat(t),e).then(()=>{A.value=1,async function(){(await B.keys()).length>0&&B.iterate((a,e)=>{W.addImage({id:e,name:e,url:"Storage"})})}()}).catch(()=>{A.value=2})}return i(()=>{}),c(()=>A.value,a=>{0!==a&&setTimeout(()=>{A.value=0},2e3)}),(a,s)=>(f(),u(k,null,[m("div",j,[2===A.value?(f(),u("div",b,[m("span",null,h(d(L)("error.uploadFail")),1)])):p("",!0),1===A.value?(f(),u("div",y,[m("span",null,h(d(L)("error.uploadSuccess")),1)])):p("",!0),3===A.value?(f(),u("div",w,[m("span",null,h(d(L)("error.notImage")),1)])):p("",!0)]),m("div",null,[m("div",I,[m("label",x,[m("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:z.value,onChange:E},null,40,S),m("span",C,h(d(L)("button.upload")),1)])]),m("ul",q,[(f(!0),u(k,null,v(d(X),a=>(f(),u("li",{key:a.id,class:"mb-3"},[m("div",F,[m("div",N,[m("div",T,[g(e,{"img-item":a},null,8,["img-item"])])]),m("div",U,[m("div",_,h(a.name),1)]),m("div",null,[m("button",{class:"btn btn-error btn-xs",onClick:e=>function(a){"Storage"===a.url&&B.removeItem(a.id).then(()=>{W.removeImage(a.id)}),W.removeImage(a.id)}(a)},h(d(L)("button.delete")),9,D)])])]))),128))])])],64))}});export{L as default};
