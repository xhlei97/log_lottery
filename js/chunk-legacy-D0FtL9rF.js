System.register(["./chunk-legacy-CjKVZ1bp.js","./chunk-legacy-BE-5mc7C.js","./chunk-legacy-UkeXD8iB.js","./chunk-legacy-BWJusyaM.js","./chunk-legacy-PVEcv5sZ.js","./chunk-legacy---gJkrHA.js","./chunk-legacy-C9K0maxy.js","./chunk-legacy-D3_pZ24x.js","./chunk-legacy-BMwARiCp.js","./chunk-legacy-BYgEWu8h.js","./chunk-legacy-CflmvWUy.js","./chunk-legacy-BYxAk2dU.js","./chunk-legacy-CRCEXRIn.js","./chunk-legacy-CNvc6cwk.js","./chunk-legacy-DEnXqUFR.js","./chunk-legacy-aREB5_Re.js","./chunk-legacy-KQLpz-uR.js","./chunk-legacy-DqbqP-9V.js","./chunk-legacy-B_CkxUCE.js","./chunk-legacy-C72SkqAC.js"],function(e,l){"use strict";var t,n,a,s,u,o,c,i,r,d,b,p,m,f,g,h,v,x,k,C,w,y,U,j,z;return{setters:[e=>{t=e.u,n=e.d,a=e.i,s=e._},e=>{u=e.a6,o=e.r,c=e.a,i=e.w,r=e.W,d=e.X,b=e.a3,p=e.bg,m=e.u,f=e.F,g=e.b0,h=e.aD,v=e.U,x=e.bL,k=e.bB,C=e.bA,w=e.aF,y=e.aS},e=>{U=e.l},e=>{j=e.s},e=>{z=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l={class:"flex w-full gap-3"},L={role:"alert",class:"w-full my-4 alert alert-info"},P={class:"p-0 m-0"},D={class:"max-w-xs mb-10 form-control"},A={class:"flex flex-col items-center gap-2 pt-5"},S={class:"w-1/2 max-w-xs mb-10 form-control"},V={class:"label"},$={class:"label-text"},M=["onUpdate:modelValue","placeholder"],N={class:"w-1/2 max-w-xs mb-10 form-control"},O={class:"label"},_={class:"label-text"},q=["checked","onChange"],B={class:"w-1/2 max-w-xs mb-10 form-control"},F={class:"label"},H={class:"label-text"},I=["onUpdate:modelValue","placeholder","onChange"],T=["data-tip"],R=["value","max"],W={class:"w-1/2 max-w-xs mb-10 form-control"},X={class:"label"},E={class:"label-text"},G=["checked","onChange"],J={class:"w-full max-w-xs mb-10 form-control"},K={class:"label"},Q={class:"label-text"},Y=["onUpdate:modelValue"],Z={key:0,value:{id:"",name:"",url:""}},ee={disabled:"",selected:""},le=["value"],te={key:0,class:"w-full max-w-xs mb-10 form-control"},ne={class:"label"},ae={class:"label-text"},se=["onClick"],ue={key:0,class:"flex flex-wrap w-full h-full gap-1 p-0 pt-1 m-0 cursor-pointer"},oe=["data-tip"],ce={key:1,class:"btn btn-secondary btn-xs"},ie={class:"w-full max-w-xs mb-10 form-control"},re={class:"label"},de={class:"label-text"},be={class:"flex gap-2"},pe=["onClick"];e("default",u({__name:"PrizeConfig",setup(e){const{t:u}=z(),me=U.createInstance({name:"imgStore"}),fe=t().prizeConfig,ge=t().globalConfig,{getPrizeConfig:he,getCurrentPrize:ve}=j(fe),{getImageList:xe}=j(ge),ke=o(he),Ce=o([]),we=o();function ye(){const e={id:(new Date).getTime().toString(),name:a.global.t("data.prizeName"),sort:0,isAll:!1,count:1,isUsedCount:0,picture:{id:"",name:"",url:""},separateCount:{enable:!1,countList:[]},desc:"",isUsed:!1,isShow:!0,frequency:1};fe.addPrizeConfig(e)}function Ue(e){we.value.separateCount.countList=e,we.value=null}function je(){fe.resetDefault()}function ze(e,l){const t=ke.value.indexOf(e);1===l?(ke.value.splice(t,1),ke.value.splice(t-1,0,e)):(ke.value.splice(t,1),ke.value.splice(t+1,0,e))}async function Le(){await fe.deleteAllPrizeConfig()}return c(()=>{!async function(){(await me.keys()).length>0&&me.iterate((e,l)=>{Ce.value.push({key:l,value:e})})}()}),i(()=>ke.value,e=>{fe.setPrizeConfig(e)},{deep:!0}),(e,t)=>{const a=s;return y(),r("div",null,[d("h2",null,p(m(u)("viewTitle.prizeManagement")),1),d("div",l,[d("button",{class:"btn btn-info btn-sm",onClick:ye},p(m(u)("button.add")),1),d("button",{class:"btn btn-info btn-sm",onClick:je},p(m(u)("button.resetDefault")),1),d("button",{class:"btn btn-error btn-sm",onClick:Le},p(m(u)("button.allDelete")),1)]),d("div",L,[t[0]||(t[0]=d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"w-6 h-6 stroke-current shrink-0"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d("span",null,p(m(u)("dialog.tipResetPrize")),1)]),d("ul",P,[(y(!0),r(f,null,g(ke.value,e=>(y(),r("li",{key:e.id,class:h(["flex gap-10",m(ve).id===e.id?"border-1 border-dotted rounded-xl":null])},[d("label",D,[d("div",A,[b(a,{class:h(["cursor-pointer hover:text-blue-400",0===ke.value.indexOf(e)?"opacity-0 cursor-default":""]),name:"up",onClick:l=>ze(e,1)},null,8,["class","onClick"]),b(a,{class:h(["cursor-pointer hover:text-blue-400",ke.value.indexOf(e)===ke.value.length-1?"opacity-0 cursor-default":""]),name:"down",onClick:l=>ze(e,0)},null,8,["class","onClick"])])]),d("label",S,[d("div",V,[d("span",$,p(m(u)("table.prizeName")),1)]),x(d("input",{"onUpdate:modelValue":l=>e.name=l,type:"text",placeholder:m(u)("placeHolder.name"),class:"w-full max-w-xs input-sm input input-bordered"},null,8,M),[[k,e.name]])]),d("label",N,[d("div",O,[d("span",_,p(m(u)("table.fullParticipation")),1)]),d("input",{type:"checkbox",checked:e.isAll,class:"mt-2 border-solid checkbox checkbox-secondary border-1",onChange:l=>e.isAll=!e.isAll},null,40,q)]),d("label",B,[d("div",F,[d("span",H,p(m(u)("table.numberParticipants")),1)]),x(d("input",{"onUpdate:modelValue":l=>e.count=l,type:"number",placeholder:m(u)("placeHolder.winnerCount"),class:"w-full max-w-xs p-0 m-0 input-sm input input-bordered",onChange:l=>function(e){let l=-1;for(let t=0;t<ke.value.length;t++)if(ke.value[t].id===e.id){l=t;break}l>-1&&(ke.value[l].separateCount.countList=[],ke.value[l].isUsed?ke.value[l].isUsedCount=ke.value[l].count:ke.value[l].isUsedCount=0)}(e)},null,40,I),[[k,e.count]]),d("div",{class:"tooltip tooltip-bottom","data-tip":`${m(u)("table.isDone")+e.isUsedCount}/${e.count}`},[d("progress",{class:"w-full progress",value:e.isUsedCount,max:e.count},null,8,R)],8,T)]),d("label",W,[d("div",X,[d("span",E,p(m(u)("table.isDone")),1)]),d("input",{type:"checkbox",checked:e.isUsed,class:"mt-2 border-solid checkbox checkbox-secondary border-1",onChange:l=>function(e){e.isUsed?e.isUsedCount=0:e.isUsedCount=e.count,e.separateCount.countList=[],e.isUsed=!e.isUsed}(e)},null,40,G)]),d("label",J,[d("div",K,[d("span",Q,p(m(u)("table.image")),1)]),x(d("select",{"onUpdate:modelValue":l=>e.picture=l,class:"w-full max-w-xs select select-warning select-sm"},[e.picture.id?(y(),r("option",Z,"âŒ")):v("",!0),d("option",ee,p(m(u)("table.selectPicture")),1),(y(!0),r(f,null,g(m(xe),e=>(y(),r("option",{key:e.id,value:e},p(e.name),9,le))),128))],8,Y),[[C,e.picture]])]),e.separateCount?(y(),r("label",te,[d("div",ne,[d("span",ae,p(m(u)("table.onceNumber")),1)]),d("div",{class:"flex justify-start w-full h-full",onClick:l=>function(e){we.value=e,we.value.isUsedCount=0,we.value.isUsed=!1,we.value.separateCount.countList.length>1||(we.value.separateCount={enable:!0,countList:[{id:"0",count:e.count,isUsedCount:0}]})}(e)},[e.separateCount.countList.length?(y(),r("ul",ue,[(y(!0),r(f,null,g(e.separateCount.countList,e=>(y(),r("li",{key:e.id,class:"relative flex items-center justify-center w-8 h-8 bg-slate-600/60 separated"},[d("div",{class:"flex items-center justify-center w-full h-full tooltip","data-tip":`${m(u)("tooltip.doneCount")+e.isUsedCount}/${e.count}`},[d("div",{class:"absolute left-0 z-50 h-full bg-blue-300/80",style:w(`width:${100*e.isUsedCount/e.count}%`)},null,4),d("span",null,p(e.count),1)],8,oe)]))),128))])):(y(),r("button",ce,p(m(u)("button.setting")),1))],8,se)])):v("",!0),d("label",ie,[d("div",re,[d("span",de,p(m(u)("table.operation")),1)]),d("div",be,[d("button",{class:"btn btn-error btn-sm",onClick:l=>function(e){fe.deletePrizeConfig(e.id)}(e)},p(m(u)("button.delete")),9,pe)])])],2))),128))]),b(n,{"total-number":we.value?.count,"separated-number":we.value?.separateCount.countList,onSubmitData:Ue},null,8,["total-number","separated-number"])])}}}))}}});
