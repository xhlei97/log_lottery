System.register(["./chunk-legacy-CjKVZ1bp.js","./chunk-legacy-uhuF54xz.js","./chunk-legacy-UkeXD8iB.js","./chunk-legacy-BWJusyaM.js","./chunk-legacy-PVEcv5sZ.js","./chunk-legacy-BE-5mc7C.js","./chunk-legacy---gJkrHA.js","./chunk-legacy-C9K0maxy.js","./chunk-legacy-D3_pZ24x.js","./chunk-legacy-BMwARiCp.js","./chunk-legacy-BYgEWu8h.js","./chunk-legacy-CflmvWUy.js","./chunk-legacy-BYxAk2dU.js","./chunk-legacy-CRCEXRIn.js","./chunk-legacy-CNvc6cwk.js","./chunk-legacy-DEnXqUFR.js","./chunk-legacy-aREB5_Re.js","./chunk-legacy-KQLpz-uR.js","./chunk-legacy-DqbqP-9V.js","./chunk-legacy-B_CkxUCE.js","./chunk-legacy-C72SkqAC.js"],function(e,l){"use strict";var a,n,s,t,c,u,r,i,o,g,h,y,m,d,v,k,p,j,f;return{setters:[e=>{a=e.u,n=e.g},e=>{s=e.a},e=>{t=e.l},e=>{c=e.s},e=>{u=e.u},e=>{r=e.a6,i=e.r,o=e.a,g=e.w,h=e.W,y=e.X,m=e.U,d=e.bg,v=e.u,k=e.F,p=e.b0,j=e.a3,f=e.aS},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l={class:"toast toast-top toast-end"},b={key:0,class:"alert alert-error"},w={key:1,class:"alert alert-success"},I={key:2,class:"alert alert-error"},x={class:""},S={for:"explore"},C=["accept"],q={class:"btn btn-primary btn-sm"},F={class:"p-0"},N={class:"flex items-center gap-8"},T={class:"avatar h-14"},U={class:"w-12 h-12 mask mask-squircle hover:w-14 hover:h-14"},$={class:"w-64"},_={class:"overflow-hidden font-bold whitespace-nowrap text-ellipsis"},D=["onClick"];e("default",r({__name:"ImageConfig",setup(e){const{t:r}=u(),L=a().globalConfig,{getImageList:W}=c(L),X=i("image/*"),z=i(0),A=t.createInstance({name:"imgStore"});async function B(e){if(!/image*/.test(e.target.files[0].type))return void(z.value=3);const{dataUrl:l,fileName:a}=await s(e.target.files[0]);A.setItem(`${(new Date).getTime().toString()}+${a}`,l).then(()=>{z.value=1,async function(){(await A.keys()).length>0&&A.iterate((e,l)=>{L.addImage({id:l,name:l,url:"Storage"})})}()}).catch(()=>{z.value=2})}return o(()=>{}),g(()=>z.value,e=>{0!==e&&setTimeout(()=>{z.value=0},2e3)}),(e,a)=>(f(),h(k,null,[y("div",l,[2===z.value?(f(),h("div",b,[y("span",null,d(v(r)("error.uploadFail")),1)])):m("",!0),1===z.value?(f(),h("div",w,[y("span",null,d(v(r)("error.uploadSuccess")),1)])):m("",!0),3===z.value?(f(),h("div",I,[y("span",null,d(v(r)("error.notImage")),1)])):m("",!0)]),y("div",null,[y("div",x,[y("label",S,[y("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:X.value,onChange:B},null,40,C),y("span",q,d(v(r)("button.upload")),1)])]),y("ul",F,[(f(!0),h(k,null,p(v(W),e=>(f(),h("li",{key:e.id,class:"mb-3"},[y("div",N,[y("div",T,[y("div",U,[j(n,{"img-item":e},null,8,["img-item"])])]),y("div",$,[y("div",_,d(e.name),1)]),y("div",null,[y("button",{class:"btn btn-error btn-xs",onClick:l=>function(e){"Storage"===e.url&&A.removeItem(e.id).then(()=>{L.removeImage(e.id)}),L.removeImage(e.id)}(e)},d(v(r)("button.delete")),9,D)])])]))),128))])])],64))}}))}}});
