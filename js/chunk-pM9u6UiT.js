import{u as t}from"./chunk-B5qR3bqg.js";import{a as n}from"./chunk-Dv7RK_ed.js";import{l as s}from"./chunk-BcwQrg-K.js";import{s as e}from"./chunk-CsYshFua.js";import{u as a}from"./chunk-B6HHG8fs.js";import{a6 as i,r as o,a as c,W as r,X as u,bg as l,u as m,F as p,b0 as b,aS as k}from"./chunk-DItFX9tw.js";import"./chunk-ClxWGSjw.js";import"./chunk-DsPhSQSX.js";import"./chunk-COJDRNUs.js";import"./chunk-DUzMzk5W.js";import"./chunk-T1cRhSFL.js";import"./chunk-CjQQEEno.js";import"./chunk-q-ZagYLw.js";import"./chunk-B-qLbzZm.js";import"./chunk-VPk9p_S4.js";import"./chunk-DezxjiP8.js";import"./chunk-DNiUIIzL.js";import"./chunk-BvWJbea5.js";import"./chunk-DbPkkXUs.js";import"./chunk-DHt_odDz.js";import"./chunk-CktjyfsX.js";const h={class:"flex gap-3"},f={for:"explore"},d=["accept"],j={class:"btn btn-primary btn-sm"},g={class:"p-0"},v={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},y={class:"flex gap-3"},x=["onClick"],C=["onClick"],w=i({__name:"MusicConfig",setup(i){const{t:w}=a(),M=o(0),S=s.createInstance({name:"audioStore"}),D=t().globalConfig,{getMusicList:I}=e(D),L=o("audio/*"),N=o(I);function T(){D.resetMusicList(),S.clear()}function _(){D.clearMusicList(),S.clear()}async function q(){(await S.keys()).length>0&&S.iterate((t,n)=>{D.addMusic({id:n+(new Date).getTime().toString(),name:n,url:"Storage"})})}async function F(t){if(!/audio*/.test(t.target.files[0].type))return void(M.value=3);const{dataUrl:s,fileName:e}=await n(t.target.files[0]);S.setItem("".concat((new Date).getTime().toString(),"+").concat(e),s).then(()=>{M.value=1,q()}).catch(()=>{M.value=2})}return c(()=>{q()}),(t,n)=>(k(),r("div",null,[u("div",h,[u("button",{class:"btn btn-primary btn-sm",onClick:T},l(m(w)("button.reset")),1),u("label",f,[u("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:L.value,onChange:F},null,40,d),u("span",j,l(m(w)("button.upload")),1)]),u("button",{class:"btn btn-error btn-sm",onClick:_},l(m(w)("button.allDelete")),1)]),u("div",null,[u("ul",g,[(k(!0),r(p,null,b(N.value,t=>(k(),r("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[u("div",v,[u("span",null,l(t.name),1)]),u("div",y,[u("button",{class:"btn btn-primary btn-xs",onClick:n=>async function(t){D.setCurrentMusic(t,!1)}(t)},l(m(w)("button.play")),9,x),u("button",{class:"btn btn-error btn-xs",onClick:n=>function(t){D.removeMusic(t.id),S.removeItem(t.name)}(t)},l(m(w)("button.delete")),9,C)])]))),128))])])]))}});export{w as default};
